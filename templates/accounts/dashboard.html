{% extends 'base.html' %}
{% block content %}

   
    {% include 'includes/sidebarnav.html' %}

    <div class="lg:flex md:justify-center lg:bg-gray-50 col-span-9 mt-2 lg:mt-0 w-full h-full items-center rounded-lg">
        <div class="w-full max-w-sm lg:mx-6 md:mx-auto mt-10 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
            <div class="flex flex-col items-center py-3 pb-10">
                <img class="w-30 h-30 mb-3 rounded-full shadow-lg" src="https://cdn-icons-png.flaticon.com/128/2202/2202112.png" alt="Bonnie image">
                <h5 class="mb-1 text-xl font-medium text-gray-900 dark:text-white">{{detalle.Nombre}} {{detalle.Apellido}}</h5>
                <span class="text-sm text-gray-500 dark:text-gray-400">{{Fecha_nacimiento}}</span>
                <div class="flex mt-4 space-x-3 md:mt-6">
                    <a href="#" data-modal-target="authentication-modal" data-modal-toggle="authentication-modal" class="inline-flex items-center px-4 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-full hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover-bg-blue-700 dark:focus-ring-blue-800">Editar Perfil</a>
                    <a href="#" class="inline-flex items-center px-4 py-2 text-sm font-medium text-center text-white bg-red-700 border border-gray-300 rounded-full hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover-bg-gray-700 dark:hover-border-gray-700 dark:focus-ring-gray-700">Cerrar Sesi√≥n</a>
                </div>
            </div>
        </div>
        <div class="mx-4 space-y-4 py-6 md:mx-auto">
            <div class="max-w-sm p-4 sm:p-6 bg-white   border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
                <a href="#">
                    <h5 class="mb-2 text-2xl font-semibold tracking-tight text-gray-900 dark:text-white">Mi Informacion </h5>
                </a>
                <dl class="max-w-md text-gray-900 divide-y divide-gray-200 dark:text-white dark:divide-gray-700">
                    <div class="flex flex-col pb-3">
                        <dt class="mb-1 text-gray-500 dark:text-gray-400">Direccion de Email</dt>
                        <dd class="text-lg font-semibold">{{detalle.Email}}</dd>
                    </div>
                    <div class="  flex flex-col py-3">
                        <dt class="mb-1 text-gray-500 dark:text-gray-400">Direccion</dt>
                        <ul role="list" class="divide-y divide-gray-200 dark:divide-gray-700">
                            <li class="py-3 sm:py-4 bg-gray-50">
                                <div class="flex items-center space-x-4">
                                    <div class="flex-shrink-0">
                                        <?xml version="1.0" encoding="UTF-8"?>
                                        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="24" height="24"><path d="M18,6c0-3.309-2.691-6-6-6S6,2.691,6,6c0,2.968,2.166,5.439,5,5.916v11.084c0,.552,.448,1,1,1s1-.448,1-1V11.916c2.834-.477,5-2.948,5-5.916Zm-6,4c-2.206,0-4-1.794-4-4s1.794-4,4-4,4,1.794,4,4-1.794,4-4,4Z"/></svg>
                                        
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <p class="text-sm font-medium text-gray-900 truncate dark:text-white">
                                            {{detalle.direccion}}
                                        </p>
                                        <p class="text-sm text-gray-500 truncate dark:text-gray-400">
                                            {{detalle.provincia}} , {{detalle.distrito}} , {{detalle.corregimiento}}
                                        </p>
                                    </div>
                                   
                                </div>
                            </li>
                        </ul>
                        
                        <div class="mt-4 flex justify-center">
                            <a href="{% url 'direccion' %}"   type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover-bg-blue-700 dark:focus-ring-blue-800 focus:outline-none dark:focus-ring-blue-800">Administrar Direcciones</a>
                        </div>
        
                    </div>
                    <div class="flex flex-col pt-3">
                        <dt class="mb-1 text-gray-500 dark:text-gray-400">Telefono</dt>
                        <ul role="list" class="divide-y divide-gray-200 dark:divide-gray-700">
                            <li class="py-3 sm:py-4 bg-gray-50">
                                <div class="flex items-center space-x-2">
                                    <div class="flex-shrink-0">
                                      
                                        <?xml version="1.0" encoding="UTF-8"?>
                                        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="20" height="20"><path d="M13,1a1,1,0,0,1,1-1A10.011,10.011,0,0,1,24,10a1,1,0,0,1-2,0,8.009,8.009,0,0,0-8-8A1,1,0,0,1,13,1Zm1,5a4,4,0,0,1,4,4,1,1,0,0,0,2,0,6.006,6.006,0,0,0-6-6,1,1,0,0,0,0,2Zm9.093,10.739a3.1,3.1,0,0,1,0,4.378l-.91,1.049c-8.19,7.841-28.12-12.084-20.4-20.3l1.15-1A3.081,3.081,0,0,1,7.26.906c.031.031,1.884,2.438,1.884,2.438a3.1,3.1,0,0,1-.007,4.282L7.979,9.082a12.781,12.781,0,0,0,6.931,6.945l1.465-1.165a3.1,3.1,0,0,1,4.281-.006S23.062,16.708,23.093,16.739Zm-1.376,1.454s-2.393-1.841-2.424-1.872a1.1,1.1,0,0,0-1.549,0c-.027.028-2.044,1.635-2.044,1.635a1,1,0,0,1-.979.152A15.009,15.009,0,0,1,5.9,9.3a1,1,0,0,1,.145-1S7.652,6.282,7.679,6.256a1.1,1.1,0,0,0,0-1.549c-.031-.03-1.872-2.425-1.872-2.425a1.1,1.1,0,0,0-1.51.039l-1.15,1C-2.495,10.105,14.776,26.418,20.721,20.8l.911-1.05A1.121,1.121,0,0,0,21.717,18.193Z"/></svg>

                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <p class="text-lg font-medium text-gray-900 truncate dark:text-white">
                                            {{detalle.Celular}}
                                        </p>
                                      
                                    </div>
                                   
                                </div>
                            </li>
                        </ul>
                       
                       
                        
                    </div>
                </dl>
                          </div>
            <div class=" max-w-sm p-4 sm:p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
                <a href="#">
                    <h5 class="mb-2 text-2xl font-semibold tracking-tight text-gray-900 dark:text-white">Mis listas de Compras</h5>
                </a>
                <ul role="list" class="divide-y divide-gray-200 dark:divide-gray-700">
                    <li class="py-3 sm:py-4 bg-gray-50">
                        <div class="flex items-center space-x-2">
                            <div class="flex-shrink-0">
                              
                                <?xml version="1.0" encoding="UTF-8"?>
                                <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="20" height="20"><path d="M21,6H18A6,6,0,0,0,6,6H3A3,3,0,0,0,0,9V19a5.006,5.006,0,0,0,5,5H19a5.006,5.006,0,0,0,5-5V9A3,3,0,0,0,21,6ZM12,2a4,4,0,0,1,4,4H8A4,4,0,0,1,12,2ZM22,19a3,3,0,0,1-3,3H5a3,3,0,0,1-3-3V9A1,1,0,0,1,3,8H6v2a1,1,0,0,0,2,0V8h8v2a1,1,0,0,0,2,0V8h3a1,1,0,0,1,1,1Z"/></svg>
                                
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-xl font-medium text-gray-900 truncate dark:text-white">
                                    {{carrito.Detalle}}
                                </p>
                              
                            </div>
                           
                        </div>
                    </li>
                </ul>
                
                <a href="{% url 'ListaCompra' %}" class="inline-flex items-center text-blue-600 hover:underline">
                    Ver mas
                    <svg class="w-3 h-3 ml-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11v4.833A1.166 1.166 0 0 1 13.833 17H2.167A1.167 1.167 0 0 1 1 15.833V4.167A1.166 1.166 0 0 1 2.167 3h4.618m4.447-2H17v5.768M9.111 8.889l7.778-7.778"/>
                    </svg>
                </a>
            </div>
        </div>
    </div>
    






































<!--modal de perfil-->
<div id="authentication-modal" tabindex="-1" aria-hidden="true" class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full">
    <div class="relative w-full max-w-md max-h-full">
        <!-- Modal content -->
        <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
            <button type="button" class="absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="authentication-modal">
                <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                </svg>
                <span class="sr-only">Close modal</span>
            </button>
            <div class="px-6 py-6 lg:px-8">
                <h3 class="mb-4 text-xl font-medium text-gray-900 dark:text-white">Actualiza tus datos</h3>
                <div class="container">
 
    
                    <form  id="userForm" onsubmit="updateUserData(); return false;">
                        {% csrf_token %}
                        <div class="grid gap-6 mb-6 md:grid-cols-2">
                            <div>
                                <label for="first_name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nombre</label>
                                <input type="text" id="nombre" value="{{detalle.Nombre}}" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="John" required>
                            </div>
                            <div>
                                <label for="last_name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Apellido</label>
                                <input type="text" id="apellido" value="{{detalle.Apellido}}" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Doe" required>
                            </div>
                           
                            <div>

                                <label for="company" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Fecha de nacimiento</label>
                    
                                <div class="relative max-w-sm">
                                    <div class="absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none">
                                      <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"/>
                                      </svg>
                                    </div>
                                    <input datepicker type="text" value="{{Fecha_nacimiento}}" id="fechad" name="fechad" 
                                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                                    placeholder="Seleccionar Fecha de Entrega" >
                                </div>
                            </div>  
                            <div>
                                <label for="phone" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Sexo</label>
                                <select id="countries" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                                    <option value="1" {% if detalle.Sexo == "1" %}selected{% endif %}>Masculino</option>
                                    <option value="2" {% if detalle.Sexo == "2" %}selected{% endif %}>Femenino</option>
                                    <option value="3" {% if detalle.Sexo == "3" %}selected{% endif %}>No Definido</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="website" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Eresm√°s #</label>
                                <input type="number" value="{{detalle.Eresmas}}" id="website" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="" required>
                            </div>
                            <div>
                                <label for="visitors" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Empresa</label>
                                <input type="text"  value="{{detalle.Empresa}}"  id="visitors" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="" required>
                            </div>
                            <div >
                                <label for="RUC" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">RUC</label>
                                <input type="text" value="{{detalle.RUC}}"  id="email" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="" required>
                            </div> 
                            <div >
                                <label for="dv" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">D.V</label>
                                <input type="text" value="{{detalle.DV}}"  id="password" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="" required>
                            </div> 
                        </div>
                      
                        <div class="text-center">
                    
                            <button  id="continuarButton" type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Guardar</button>
                        </div>
                      
                    </form>
                    
                              
                            </div>
                            
            </div>
        </div>
    </div>
</div> 

<script>
function updateUserData() {
    var formData = {
        nombre: $('#nombre').val(),
        apellido: $('#apellido').val(),
        fechad: $('#fechad').val(),
        Sexo: $('#countries').val(),
        eresmas: $('#website').val(),
        empresa: $('#visitors').val(),
        Ruc: $('#email').val(),
        Dv: $('#password').val(),
        // Otros campos de entrada
    };

    var csrfToken = $("input[name=csrfmiddlewaretoken]").val();

    $.ajax({
        url: "{% url 'EditarPerfil' %}",
        method: "POST",
        dataType: "json",
        headers: {
            "X-CSRFToken": csrfToken
        },
        data: formData,
        success: function (response) {
            // Manejar la respuesta de la API, por ejemplo, mostrar un mensaje de √©xito

            // Cerrar el modal
    
            // Recargar la p√°gina
          
        },
        error: function (error) {
            console.log("Error al actualizar los datos"); // Manejar errores, por ejemplo, mostrar un mensaje de error
        }
    });
}


continuarButton.addEventListener("click", function () {
      // Guardar el valor en sessionStorage antes de cerrar el modal
      updateUserData();

      // Ocultar la alerta principal
      
      // Recargar la p√°gina
      location.reload();
    });



</script>







{% endblock %}